<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday ğŸ’–</title>

<style>
:root{
  --pink1:#ff7abf;
  --pink2:#ffd4ea;
  --pink3:#ff2f92;
  --glass:rgba(255,255,255,.25);
}

*{box-sizing:border-box;}

body{
  margin:0;
  font-family:'Poppins',Arial,sans-serif;
  background:linear-gradient(135deg,var(--pink1),var(--pink2));
  color:#5b0030;
  text-align:center;
  overflow-x:hidden;
}

/* Floating Quotes */
.floating span{
  position:fixed;
  bottom:-100px;
  font-size:1.4rem;
  font-weight:600;
  color:#fff;
  opacity:.4;
  animation:floatUp linear infinite;
  pointer-events:none;
}
.floating span:nth-child(1){left:10%;animation-duration:12s;}
.floating span:nth-child(2){left:40%;animation-duration:15s;}
.floating span:nth-child(3){left:70%;animation-duration:18s;}

@keyframes floatUp{
  to{transform:translateY(-130vh);}
}

/* Sections */
.section{
  max-width:1100px;
  margin:0 auto 40px;
  padding:20px;
}
.card{
  background:var(--glass);
  backdrop-filter:blur(14px);
  border-radius:26px;
  padding:30px;
  box-shadow:0 20px 45px rgba(0,0,0,.25);
}

/* Gallery */
.gallery{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
}
.photo{
  border-radius:20px;
  overflow:hidden;
}
.photo img{
  width:100%;
  transition:.6s;
}
.photo:hover img{transform:scale(1.1);}

/* Cake */
.candle{
  width:12px;
  height:40px;
  background:white;
  margin:0 auto;
  border-radius:4px;
  position:relative;
}
.flame{
  width:16px;
  height:16px;
  background:orange;
  border-radius:50%;
  position:absolute;
  top:-16px;
  left:50%;
  transform:translateX(-50%);
  animation:flicker .2s infinite alternate;
}
@keyframes flicker{
  to{transform:translateX(-50%) scale(.8);}
}

.cake-img{
  width:240px;
  margin-top:10px;
  transition:1s;
}

/* Mic hint */
.mic-text{
  color:white;
  font-weight:600;
  margin-top:15px;
}

/* 3D Card */
.card3d{
  width:260px;
  height:180px;
  margin:40px auto 0;
  perspective:1000px;
  display:none;
}
.card-inner{
  width:100%;
  height:100%;
  transform-style:preserve-3d;
  animation:openCard 2s forwards;
}
.card-face{
  position:absolute;
  width:100%;
  height:100%;
  border-radius:20px;
  backface-visibility:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.2rem;
  font-weight:600;
}
.front{background:#ff2f92;color:white;}
.back{
  background:white;
  color:#ff2f92;
  transform:rotateY(180deg);
}

@keyframes openCard{
  to{transform:rotateY(180deg);}
}
</style>
</head>

<body>

<div class="floating">
  <span>Smile ğŸ’•</span>
  <span>Cute âœ¨</span>
  <span>Pretty ğŸŒ¸</span>
</div>

<header class="section">
  <h1 style="color:white;">Happy Birthday Prasansa ğŸ€</h1>
  <p style="color:white;"></p>
</header>

<section class="section">
  <div class="card">
    ğŸŒ¸ May your life glow brighter than these candles  
    and your smile never fade ğŸ’–
  </div>
</section>

<section class="section">
  <div class="card">
    <h2>Sweet Memories ğŸ’</h2>
    <div class="gallery">
      <div class="photo"><img src="images/pic1.jpg"></div>
      <div class="photo"><img src="images/pic2.jpg"></div>
      <div class="photo"><img src="images/pic3.jpg"></div>
    </div>
  </div>
</section>

<section class="section">
  <div class="card">
    <h2>Make a Wish ğŸ‚</h2>

    <div class="candle">
      <div class="flame" id="flame"></div>
    </div>

    <img src="cake.png" class="cake-img" id="cake">

    <p class="mic-text" id="micText">ğŸ¤ Blow into your microphone</p>

    <div class="card3d" id="card3d">
      <div class="card-inner">
        <div class="card-face front">ğŸ For You</div>
        <div class="card-face back">
          Happy Birthday ğŸ’–<br>
          Stay Cute â€¢ Stay Smiling ğŸŒ¸
        </div>
      </div>
    </div>
  </div>
</section>

<audio id="song" src="song.mp3" loop></audio>

<script>
let blown=false;

navigator.mediaDevices.getUserMedia({ audio:true }).then(stream=>{
  const audioCtx=new AudioContext();
  const mic=audioCtx.createMediaStreamSource(stream);
  const analyser=audioCtx.createAnalyser();
  analyser.fftSize=256;
  mic.connect(analyser);

  const data=new Uint8Array(analyser.frequencyBinCount);

  function detectBlow(){
    if(blown) return;

    analyser.getByteFrequencyData(data);
    let volume=data.reduce((a,b)=>a+b)/data.length;

    if(volume>60){ // blow threshold
      blown=true;
      document.getElementById("flame").style.display="none";
      document.getElementById("cake").style.opacity="0.3";
      document.getElementById("card3d").style.display="block";
      document.getElementById("micText").innerText="ğŸ‰ Wish Granted!";
      document.getElementById("song").play();
    }
    requestAnimationFrame(detectBlow);
  }
  detectBlow();
});
</script>

</body>
</html>
